import{g as e,a as t}from"./index-DJ5eHNvF.js";import{r as n,a5 as a,a6 as r,a7 as i,b6 as o,W as s,aR as l,aJ as c,aY as d,a$ as p,p as m,b as u,F as f,j as g,dQ as y,k as x,m as h,S,L as j,v as b,B as v,dR as w,dS as k,dT as O,y as C,dU as E}from"./index-CNTZKFxL.js";import{H as I}from"./index-C9uzODqM.js";import{p as $}from"./proTable-BUOzHjgg.js";import{f as T}from"./index-Ciy2PQr0.js";import N from"./FormModal-CctMyMTj.js";import _ from"./UploadModal-BNzkawS7.js";import{j as z}from"./index-D-Bg2IRQ.js";import{P as M}from"./Table-CNnxpL1v.js";import"./index-BaoCBYsQ.js";import"./index-iWp0mO3X.js";import"./index-BCIfjuiR.js";import"./progress-swhTCgEb.js";import"./index-B6ydvJal.js";import"./index-fO0Fj89w.js";import"./useShowArrow-CyBxHHHt.js";import"./List-DvGEh4-g.js";import"./index-1kbvApUt.js";import"./addEventListener-o6XCOLVg.js";import"./ProCard-BJrOgOys.js";import"./useMultipleSelect-DpjfhKWz.js";import"./iconUtil-C8aN1QNv.js";import"./index-Da5nuaX9.js";import"./index-Djk4t3EP.js";import"./Table-IQ6RC5ov.js";import"./index-YRmd3CSW.js";import"./index-BOEfK5ZH.js";import"./index-1eu_nisw.js";const R=e=>{const{value:t,formatter:a,precision:r,decimalSeparator:i,groupSeparator:o="",prefixCls:s}=e;let l;if("function"==typeof a)l=a(t);else{const e=String(t),a=e.match(/^(-?)(\d*)(\.(\d+))?$/);if(a&&"-"!==e){const e=a[1];let t=a[2]||"0",c=a[4]||"";t=t.replace(/\B(?=(\d{3})+(?!\d))/g,o),"number"==typeof r&&(c=c.padEnd(r,"0").slice(0,r>0?r:0)),c&&(c=`${i}${c}`),l=[n.createElement("span",{key:"int",className:`${s}-content-value-int`},e,t),c&&n.createElement("span",{key:"decimal",className:`${s}-content-value-decimal`},c)]}else l=e}return n.createElement("span",{className:`${s}-content-value`},l)},D=e=>{const{componentCls:t,marginXXS:n,padding:a,colorTextDescription:r,titleFontSize:o,colorTextHeading:s,contentFontSize:l,fontFamily:c}=e;return{[t]:Object.assign(Object.assign({},i(e)),{[`${t}-title`]:{marginBottom:n,color:r,fontSize:o},[`${t}-skeleton`]:{paddingTop:a},[`${t}-content`]:{color:s,fontSize:l,fontFamily:c,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:n},[`${t}-content-suffix`]:{marginInlineStart:n}}})}},F=a("Statistic",(e=>{const t=r(e,{});return[D(t)]}),(e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}}));const P=e=>{const{prefixCls:t,className:a,rootClassName:r,style:i,valueStyle:d,value:p=0,title:m,valueRender:u,prefix:f,suffix:g,loading:y=!1,formatter:x,precision:h,decimalSeparator:S=".",groupSeparator:j=",",onMouseEnter:b,onMouseLeave:v}=e,w=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:k,direction:O,className:C,style:E}=o("statistic"),I=k("statistic",t),[$,T,N]=F(I),_=n.createElement(R,{decimalSeparator:S,groupSeparator:j,prefixCls:I,formatter:x,precision:h,value:p}),z=s(I,{[`${I}-rtl`]:"rtl"===O},C,a,r,T,N),M=l(w,{aria:!0,data:!0});return $(n.createElement("div",Object.assign({},M,{className:z,style:Object.assign(Object.assign({},E),i),onMouseEnter:b,onMouseLeave:v}),m&&n.createElement("div",{className:`${I}-title`},m),n.createElement(c,{paragraph:!1,loading:y,className:`${I}-skeleton`},n.createElement("div",{style:d,className:`${I}-content`},f&&n.createElement("span",{className:`${I}-content-prefix`},f),u?u(_):_,g&&n.createElement("span",{className:`${I}-content-suffix`},g)))))},H=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function L(e,t){const{format:n=""}=t,a=new Date(e).getTime(),r=Date.now();return function(e,t){let n=e;const a=/\[[^\]]*]/g,r=(t.match(a)||[]).map((e=>e.slice(1,-1))),i=t.replace(a,"[]"),o=H.reduce(((e,t)=>{let[a,r]=t;if(e.includes(a)){const t=Math.floor(n/r);return n-=t*r,e.replace(new RegExp(`${a}+`,"g"),(e=>{const n=e.length;return t.toString().padStart(n,"0")}))}return e}),i);let s=0;return o.replace(a,(()=>{const e=r[s];return s+=1,e}))}(Math.max(a-r,0),n)}const B=1e3/30;const U=e=>{const{value:t,format:a="HH:mm:ss",onChange:r,onFinish:i}=e,o=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["value","format","onChange","onFinish"]),s=d(),l=n.useRef(null),c=()=>{const e=function(e){return new Date(e).getTime()}(t);e>=Date.now()&&(l.current=setInterval((()=>{s(),null==r||r(e-Date.now()),e<Date.now()&&(null==i||i(),l.current&&(clearInterval(l.current),l.current=null))}),B))};n.useEffect((()=>(c(),()=>{l.current&&(clearInterval(l.current),l.current=null)})),[t]);return n.createElement(P,Object.assign({},o,{value:t,valueRender:e=>p(e,{title:void 0}),formatter:(e,t)=>L(e,Object.assign(Object.assign({},t),{format:a}))}))};P.Countdown=n.memo(U);const A=()=>{const a=m.useRef(),r=m.useRef(),i=n.useRef(null),[o,s]=n.useState(new Map),[l,c]=n.useState(new Map),[d,p]=n.useState({}),R=()=>{var e;null==(e=a.current)||e.reload()},D=[{title:"UID",dataIndex:"id",width:80,align:"center"},{title:"DocumentNumber",dataIndex:"passport_number",width:150,align:"center",hideInSearch:!0},{title:"FirstName",dataIndex:"first_name",width:100,align:"center"},{title:"LastName",dataIndex:"last_name",width:100,align:"center"},{title:"Sex",dataIndex:"gender",hideInSearch:!0,width:80,align:"center"},{title:"CountryRegion",dataIndex:"country_code",width:120,align:"center"},{title:"DateOfBirth",dataIndex:"birth_date",hideInSearch:!0,width:100,align:"center"},{title:"DateOfIssue",dataIndex:"issue_date",width:120,align:"center"},{title:"Date0fExpiration",dataIndex:"expiration_date",width:140,align:"center"},{title:"Status",dataIndex:"status",valueType:"select",valueEnum:o,width:80,align:"center"},{title:"CreateTime",dataIndex:"create_at",hideInSearch:!0,valueType:"dateTime",width:180,align:"center"},{title:"创建时间",dataIndex:"createdAt",valueType:"dateTimeRange",hideInTable:!0,search:{transform:e=>({beginCreatedAt:e[0],endCreatedAt:e[1]})}},{title:"Action",valueType:"option",align:"center",width:150,render:(e,t)=>g(I,{permission:["app:user:edit"],children:g(S,{children:"0"===t.status?g(j,{type:"link",size:"small",icon:g(b,{}),onClick:e=>F(t.id,e),children:"申请"},"edit"):"1"===t.status?g(v,{type:"link",size:"small",icon:g(w,{}),onClick:()=>window.open(t.link,"_blank"),children:"去支付"},"external-link"):"2"===t.status?g(v,{type:"link",size:"small",icon:g(k,{style:{color:"#8c8c8c"}}),style:{color:"#8c8c8c"},children:"审核中"},"external-link-2"):"3"===t.status?g(v,{type:"link",size:"small",danger:!0,icon:g(O,{}),onClick:()=>window.open(t.link,"_blank"),children:"拒签"},"external-link-2"):"4"===t.status?g(v,{type:"link",size:"small",icon:g(C,{style:{color:"#faad14"}}),style:{color:"#faad14"},onClick:()=>window.open(t.link,"_blank"),children:"补充资料"},"external-link-2"):"5"===t.status?g(v,{type:"link",size:"small",icon:g(E,{style:{color:"green"}}),style:{color:"green"},onClick:()=>window.open(t.link,"_blank"),children:"申请通过"},"external-link-2"):g("span",{children:"-"})})})}];n.useEffect((()=>{(async()=>{const{data:n,msg:a,code:r}=await e("app_user_apply_type");if(r!==x.SUCCESS)return void h.error(a);s(t(n));const{data:i,msg:o,code:l}=await e("app_user_apply_type");l===x.SUCCESS?c(t(i)):h.error(o)})()}),[]);const F=(e,t)=>{var n;null==(n=i.current)||n.showEditFormModal(e),setTimeout((()=>t()),1e3)};return u(f,{children:[g(M,{className:"ant-pro-table-scroll",columns:D,actionRef:a,formRef:r,bordered:!0,cardBordered:!0,defaultSize:"small",scroll:{x:"2000",y:"100%"},request:async e=>{const{data:t}=await z(e);return p(t.extend),T(t)},columnsState:{persistenceKey:"use-pro-table-key",persistenceType:"localStorage"},options:{reload:!0,density:!0,fullScreen:!0},rowKey:"id",search:{labelWidth:"auto",showHiddenNum:!0},pagination:$,dateFormatter:"string",headerTitle:"Passport Management",toolBarRender:()=>[g(I,{permission:["app:user:add"],children:g(_,{maxSize:10,accept:"image/png,image/jpeg",onSuccess:R},"addTable")},"addTable")],footer:()=>d&&g(P,{title:"余额 总计",value:d.money,valueStyle:{color:y.base}})}),g(N,{ref:i,onConfirm:()=>{var e;null==(e=a.current)||e.reload(!1)}})]})};export{A as default};
