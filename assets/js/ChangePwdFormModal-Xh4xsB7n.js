import{r as e,e as r,j as a,M as s,R as o,C as t,I as n,L as l,dG as i,k as d,m as c}from"./index-CoKzQiRD.js";const m=e.forwardRef((({onConfirm:m},h)=>{const[u]=r.useForm(),[C,f]=e.useState(!1),[p,y]=e.useState();e.useImperativeHandle(h,(()=>({async showChangePwdFormModal(e){y(e),f(!0)}})));const w=()=>{y(void 0),setTimeout((()=>u.resetFields()),100)};return a(s,{title:"修改密码",getContainer:!1,width:500,open:C,maskClosable:!1,keyboard:!1,onCancel:()=>{w(),f(!1)},destroyOnClose:!0,footer:[a(l,{onClick:e=>{w(),f(!1),e()},children:"取消"},"cancel"),a(l,{type:"primary",onClick:e=>(e=>{u.validateFields().then((async r=>{try{const{msg:e,code:a}=await i(p,r.password);if(a!==d.SUCCESS)return void c.error(e);c.success(e)}finally{e()}w(),f(!1),m()})).catch((r=>{c.error("表单校验失败"),e()}))})(e),children:"确定"},"confirm")],children:a(r,{form:u,layout:"vertical",children:a(o,{gutter:24,children:a(t,{span:24,children:a(r.Item,{name:"password",label:"新密码",rules:[{required:!0,message:"请输入新密码"}],children:a(n,{placeholder:"请输入新密码"})})})})})})}));export{m as default};
