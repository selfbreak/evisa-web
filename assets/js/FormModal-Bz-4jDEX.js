import{g as e,a}from"./index-CLE6mKXb.js";import{D as r,r as s,e as t,k as i,m as n,j as o,M as d,b as l,L as c}from"./index-CAZO7wzW.js";import{T as m}from"./index-B_rTnUBN.js";import{S as u}from"./index-B9If-b5F.js";const p=e=>r.get("/admin-api/v1/app/user/user-conf",{...e,pageIndex:null==e?void 0:e.current}),f=s.forwardRef((({onConfirm:p},f)=>{const[y]=t.useForm(),[S,g]=s.useState(!1),[h,C]=s.useState({}),[v,b]=s.useState(new Map);s.useImperativeHandle(f,(()=>({async showEditFormModal(e){const{data:a,msg:s,code:t}=await(e=>r.get("/admin-api/v1/app/user/user-conf/"+e))(e);t===i.SUCCESS?(C(a),y.setFieldsValue(a),g(!0)):n.error(s)}}))),s.useEffect((()=>{(async()=>{const{data:r,msg:s,code:t}=await e("admin_sys_yes_no");t===i.SUCCESS?b(a(r)):n.error(s)})()}),[]);const j=()=>{h.id>0?C({}):C({id:0}),setTimeout((()=>y.resetFields()),100)},w=e=>{y.validateFields().then((async a=>{try{const{msg:e,code:o}=await(s=h.id,t=a,r.put("/admin-api/v1/app/user/user-conf/"+s,t));if(o!==i.SUCCESS)return void n.error(e);n.success(e),j(),g(!1),p()}finally{e()}var s,t})).catch((a=>{n.error("表单校验失败"),e()}))};return o(d,{title:"编辑",getContainer:!1,width:500,open:S,maskClosable:!1,keyboard:!1,onCancel:()=>{j(),g(!1)},destroyOnClose:!0,footer:[o(c,{onClick:e=>{j(),g(!1),e()},children:"取消"},"cancel"),o(c,{type:"primary",onClick:e=>w(e),children:"确定"},"confirm")],children:l(t,{form:y,layout:"vertical",initialValues:h,children:[o(t.Item,{name:"userId",label:"用户编号",rules:[{required:!0,message:"请输入用户编号"}],children:o(m,{style:{width:"100%"},disabled:!0,min:0})}),o(t.Item,{name:"canLogin",label:"是否允许登录",rules:[{required:!0,message:"请输入是否允许登录"}],children:o(u,{placeholder:"请选择",children:Array.from(v).map((([e,a])=>o(u.Option,{value:e,children:a},e)))})})]})})})),y=Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"}));export{f as F,y as a,p as g};
