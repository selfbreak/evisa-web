import{g as e,a as t}from"./index-CL_tkCrR.js";import{r as a,a5 as n,a6 as r,a7 as i,b6 as s,W as o,aR as l,aJ as c,aY as d,a$ as p,p as m,j as u,F as f,dQ as g,S as h,L as y,v as x,B as S,dR as b,dS as j,dT as v,y as w,dU as k,b as O,dV as E,k as I,m as C}from"./index-CZh0p_oH.js";import{H as T}from"./index-Bw2Vx1Ut.js";import{p as $}from"./proTable-BUOzHjgg.js";import{f as N}from"./index-Ciy2PQr0.js";import _ from"./FormModal-DrPh-9w4.js";import z from"./UploadModal-CR2fo_AL.js";import{j as M}from"./index-DhNDaKjB.js";import{P as R}from"./Table-CKIF0KuE.js";import"./index-DW8FjFu4.js";import"./index-B8N73VGL.js";import"./index-6Treg_vs.js";import"./progress-DeWSa0eq.js";import"./index-DQ26OUIh.js";import"./index-BWNE0s_I.js";import"./useShowArrow-CUxPklP2.js";import"./List-DqGO3k9Q.js";import"./index-Bp6WHyE5.js";import"./addEventListener-sA_wUh1h.js";import"./ProCard-YIQO1D1F.js";import"./useMultipleSelect-gcGQZKVm.js";import"./iconUtil-DYt6AuPS.js";import"./index-DAFMvJY8.js";import"./index-BZLopOkK.js";import"./Table-DWGBDBqS.js";import"./index-CqN5Ooqi.js";import"./index--TOMb3kV.js";import"./index-cT5F2lma.js";const F=e=>{const{value:t,formatter:n,precision:r,decimalSeparator:i,groupSeparator:s="",prefixCls:o}=e;let l;if("function"==typeof n)l=n(t);else{const e=String(t),n=e.match(/^(-?)(\d*)(\.(\d+))?$/);if(n&&"-"!==e){const e=n[1];let t=n[2]||"0",c=n[4]||"";t=t.replace(/\B(?=(\d{3})+(?!\d))/g,s),"number"==typeof r&&(c=c.padEnd(r,"0").slice(0,r>0?r:0)),c&&(c=`${i}${c}`),l=[a.createElement("span",{key:"int",className:`${o}-content-value-int`},e,t),c&&a.createElement("span",{key:"decimal",className:`${o}-content-value-decimal`},c)]}else l=e}return a.createElement("span",{className:`${o}-content-value`},l)},D=e=>{const{componentCls:t,marginXXS:a,padding:n,colorTextDescription:r,titleFontSize:s,colorTextHeading:o,contentFontSize:l,fontFamily:c}=e;return{[t]:Object.assign(Object.assign({},i(e)),{[`${t}-title`]:{marginBottom:a,color:r,fontSize:s},[`${t}-skeleton`]:{paddingTop:n},[`${t}-content`]:{color:o,fontSize:l,fontFamily:c,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:a},[`${t}-content-suffix`]:{marginInlineStart:a}}})}},P=n("Statistic",(e=>{const t=r(e,{});return[D(t)]}),(e=>{const{fontSizeHeading3:t,fontSize:a}=e;return{titleFontSize:a,contentFontSize:t}}));const H=e=>{const{prefixCls:t,className:n,rootClassName:r,style:i,valueStyle:d,value:p=0,title:m,valueRender:u,prefix:f,suffix:g,loading:h=!1,formatter:y,precision:x,decimalSeparator:S=".",groupSeparator:b=",",onMouseEnter:j,onMouseLeave:v}=e,w=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:k,direction:O,className:E,style:I}=s("statistic"),C=k("statistic",t),[T,$,N]=P(C),_=a.createElement(F,{decimalSeparator:S,groupSeparator:b,prefixCls:C,formatter:y,precision:x,value:p}),z=o(C,{[`${C}-rtl`]:"rtl"===O},E,n,r,$,N),M=l(w,{aria:!0,data:!0});return T(a.createElement("div",Object.assign({},M,{className:z,style:Object.assign(Object.assign({},I),i),onMouseEnter:j,onMouseLeave:v}),m&&a.createElement("div",{className:`${C}-title`},m),a.createElement(c,{paragraph:!1,loading:h,className:`${C}-skeleton`},a.createElement("div",{style:d,className:`${C}-content`},f&&a.createElement("span",{className:`${C}-content-prefix`},f),u?u(_):_,g&&a.createElement("span",{className:`${C}-content-suffix`},g)))))},B=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function L(e,t){const{format:a=""}=t,n=new Date(e).getTime(),r=Date.now();return function(e,t){let a=e;const n=/\[[^\]]*]/g,r=(t.match(n)||[]).map((e=>e.slice(1,-1))),i=t.replace(n,"[]"),s=B.reduce(((e,t)=>{let[n,r]=t;if(e.includes(n)){const t=Math.floor(a/r);return a-=t*r,e.replace(new RegExp(`${n}+`,"g"),(e=>{const a=e.length;return t.toString().padStart(a,"0")}))}return e}),i);let o=0;return s.replace(n,(()=>{const e=r[o];return o+=1,e}))}(Math.max(n-r,0),a)}const U=1e3/30;const A=e=>{const{value:t,format:n="HH:mm:ss",onChange:r,onFinish:i}=e,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["value","format","onChange","onFinish"]),o=d(),l=a.useRef(null),c=()=>{const e=function(e){return new Date(e).getTime()}(t);e>=Date.now()&&(l.current=setInterval((()=>{o(),null==r||r(e-Date.now()),e<Date.now()&&(null==i||i(),l.current&&(clearInterval(l.current),l.current=null))}),U))};a.useEffect((()=>(c(),()=>{l.current&&(clearInterval(l.current),l.current=null)})),[t]);return a.createElement(H,Object.assign({},s,{value:t,valueRender:e=>p(e,{title:void 0}),formatter:(e,t)=>L(e,Object.assign(Object.assign({},t),{format:n}))}))};H.Countdown=a.memo(A);const W=()=>{const n=m.useRef(),r=m.useRef(),i=a.useRef(null),[s,o]=a.useState(new Map),[l,c]=a.useState(new Map),[d,p]=a.useState({}),F=()=>{var e;null==(e=n.current)||e.reload()},D=[{title:"UID",dataIndex:"id",width:80,align:"center"},{title:u(f,{children:g("passport.passportNumber")}),dataIndex:"passport_number",width:150,align:"center",hideInSearch:!0},{title:u(f,{children:g("passport.firstName")}),dataIndex:"first_name",width:100,align:"center"},{title:u(f,{children:g("passport.lastName")}),dataIndex:"last_name",width:100,align:"center"},{title:u(f,{children:g("passport.sex")}),dataIndex:"gender",hideInSearch:!0,width:80,align:"center"},{title:u(f,{children:g("passport.countryRegion")}),dataIndex:"country_code",width:120,align:"center"},{title:u(f,{children:g("passport.dateOfBirth")}),dataIndex:"birth_date",hideInSearch:!0,width:100,align:"center"},{title:u(f,{children:g("passport.dateOfIssue")}),dataIndex:"issue_date",width:120,align:"center"},{title:u(f,{children:g("passport.dateOfExpiration")}),dataIndex:"expiration_date",width:140,align:"center"},{title:u(f,{children:g("passport.status")}),dataIndex:"status",valueType:"select",valueEnum:s,width:80,align:"center"},{title:u(f,{children:g("passport.createTime")}),dataIndex:"create_at",hideInSearch:!0,valueType:"dateTime",width:180,align:"center"},{title:u(f,{children:g("passport.createTime")}),dataIndex:"createdAt",valueType:"dateTimeRange",hideInTable:!0,search:{transform:e=>({beginCreatedAt:e[0],endCreatedAt:e[1]})}},{title:u(f,{children:g("passport.action")}),valueType:"option",align:"center",width:150,render:(e,t)=>u(T,{permission:["app:passport:apply"],children:u(h,{children:"0"===t.status?u(y,{type:"link",size:"small",icon:u(x,{}),onClick:e=>P(t.id,e),children:"申请"},"edit"):"1"===t.status?u(S,{type:"link",size:"small",icon:u(b,{}),onClick:()=>window.open(t.link,"_blank"),children:"去支付"},"external-link"):"2"===t.status?u(S,{type:"link",size:"small",icon:u(j,{style:{color:"#8c8c8c"}}),style:{color:"#8c8c8c"},children:"审核中"},"external-link-2"):"3"===t.status?u(S,{type:"link",size:"small",danger:!0,icon:u(v,{}),onClick:()=>window.open(t.link,"_blank"),children:"拒签"},"external-link-2"):"4"===t.status?u(S,{type:"link",size:"small",icon:u(w,{style:{color:"#faad14"}}),style:{color:"#faad14"},onClick:()=>window.open(t.link,"_blank"),children:"补充资料"},"external-link-2"):"5"===t.status?u(S,{type:"link",size:"small",icon:u(k,{style:{color:"green"}}),style:{color:"green"},onClick:()=>window.open(t.link,"_blank"),children:"申请通过"},"external-link-2"):u("span",{children:"-"})})})}];a.useEffect((()=>{(async()=>{const{data:a,msg:n,code:r}=await e("app_user_apply_type");if(r!==I.SUCCESS)return void C.error(n);o(t(a));const{data:i,msg:s,code:l}=await e("app_user_apply_type");l===I.SUCCESS?c(t(i)):C.error(s)})()}),[]);const P=(e,t)=>{var a;null==(a=i.current)||a.showEditFormModal(e),setTimeout((()=>t()),1e3)};return O(f,{children:[u(R,{className:"ant-pro-table-scroll",columns:D,actionRef:n,formRef:r,bordered:!0,cardBordered:!0,defaultSize:"small",scroll:{x:"2000",y:"100%"},request:async e=>{const{data:t}=await M(e);return p(t.extend),N(t)},columnsState:{persistenceKey:"use-pro-table-key",persistenceType:"localStorage"},options:{reload:!0,density:!0,fullScreen:!0},rowKey:"id",search:{labelWidth:"auto",showHiddenNum:!0},pagination:$,dateFormatter:"string",headerTitle:u(f,{children:g("passport.passportNumber")}),toolBarRender:()=>[u(T,{permission:["app:passport:upload"],children:u(z,{maxSize:10,accept:"image/png,image/jpeg",onSuccess:F},"addTable")},"addTable")],footer:()=>d&&u(H,{title:"余额 总计",value:d.money,valueStyle:{color:E.base}})}),u(_,{ref:i,onConfirm:()=>{var e;null==(e=n.current)||e.reload(!1)}})]})};export{W as default};
