import{a as e}from"./index-B2Sw1O7P.js";import{r as a,e as t,k as i,m as r,j as s,F as d,b as l,R as n,C as o,I as m,S as c,L as h}from"./index-CF0uPSqa.js";import{g as Y,u as p}from"./index-MB6RefHh.js";import{d as u,D as f}from"./index-TUxR6zD5.js";import{D as _}from"./index-EdbprBVH.js";import"./useIcons-qJD2PldO.js";const D=a.forwardRef((({onConfirm:D},M)=>{const[b]=t.useForm(),[x,y]=a.useState(!1),[S,w]=a.useState({});a.useImperativeHandle(M,(()=>({async showEditPassPortFormModal(e){const{data:a,msg:t,code:s}=await Y(e);s===i.SUCCESS?(w(a),b.setFieldsValue({...a,birth_date:a.birth_date?u(a.birth_date,"YYYY-MM-DD"):null,issue_date:a.issue_date?u(a.issue_date,"YYYY-MM-DD"):null,expiration_date:a.expiration_date?u(a.expiration_date,"YYYY-MM-DD"):null}),y(!0)):r.error(t)}})));const C=()=>{S.id>0?w({}):w({id:0}),setTimeout((()=>b.resetFields()),100)};return s(d,{children:s(f,{title:"修改信息",width:1200,open:x,onClose:()=>{C(),y(!1)},bodyStyle:{padding:"10px"},footer:l(c,{children:[s(h,{onClick:e=>{C(),y(!1),D(),e()},children:"取消"}),s(h,{type:"primary",onClick:a=>(a=>{b.validateFields().then((async t=>{var s,d,l;try{const a={...t,birth_date:null==(s=t.birth_date)?void 0:s.format("YYYY-MM-DD"),issue_date:null==(d=t.issue_date)?void 0:d.format("YYYY-MM-DD"),expiration_date:null==(l=t.expiration_date)?void 0:l.format("YYYY-MM-DD")};if(S.id<=0){const{msg:t,code:s}=await e(a);if(s!==i.SUCCESS)return void r.error(t);r.success(t)}else{const{msg:e,code:t}=await p(S.id,a);if(t!==i.SUCCESS)return void r.error(e);r.success("更新成功")}C(),y(!1),D()}finally{a()}})).catch((e=>{r.error("表单校验失败"),a()}))})(a),children:"确定"})]}),children:S.id>0&&s(t,{form:b,layout:"vertical",initialValues:S,children:l(n,{gutter:16,children:[l(o,{span:12,style:{padding:"0 8px"},children:[s(t.Item,{name:"name",label:"中文姓名",children:s(m,{placeholder:"请输入中文姓名"})}),s(t.Item,{name:"first_name",label:"姓",children:s(m,{placeholder:"请输入姓"})}),s(t.Item,{name:"last_name",label:"名",children:s(m,{placeholder:"请输入名"})}),s(t.Item,{name:"passport_number",label:"护照号",children:s(m,{})})]}),l(o,{span:12,style:{padding:"0 8px"},children:[s(t.Item,{name:"birth_date",label:"出生年月",children:s(_,{format:"YYYY-MM-DD",style:{width:"100%"}})}),s(t.Item,{name:"issue_date",label:"签发日期",children:s(_,{format:"YYYY-MM-DD",style:{width:"100%"}})}),s(t.Item,{name:"expiration_date",label:"有效期至",children:s(_,{format:"YYYY-MM-DD",style:{width:"100%"}})}),s(t.Item,{name:"json_data",label:"提交的数据",children:s("textarea",{style:{width:"100%"},cols:10,rows:10,placeholder:"<UNK>"})})]})]})})})})}));export{D as default};
