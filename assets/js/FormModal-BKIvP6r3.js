import{c as e,e as r,u as a}from"./index-DnUtcYwn.js";import{r as s,e as i,k as t,m as l,j as d,M as o,b as n,I as c,L as m}from"./index-DIiB2x9H.js";import{T as u}from"./index-0Td1rr0F.js";const h=s.forwardRef((({onConfirm:h},f)=>{const[p,y]=s.useState(!1),[C,S]=s.useState({}),[b]=i.useForm();s.useImperativeHandle(f,(()=>({showAddFormModal(e){w(e),y(!0)},async showEditFormModal(r){const{data:a,msg:s,code:i}=await e(r);i===t.SUCCESS?(S(a),b.setFieldsValue(a),y(!0)):l.error(s)}})));const w=e=>{C.id>0?S({}):S({id:0,dictSort:0,dictType:e}),setTimeout((()=>b.resetFields()),100)};return d(o,{title:C.id>0?"编辑":"新增",getContainer:!1,width:500,open:p,maskClosable:!1,keyboard:!1,onCancel:()=>{w(""),y(!1)},destroyOnClose:!0,footer:[d(m,{onClick:e=>{w(""),y(!1),e()},children:"取消"},"cancel"),d(m,{type:"primary",onClick:e=>(e=>{b.validateFields().then((async s=>{try{if(C.id<=0){const{msg:e,code:a}=await r(s);if(a!==t.SUCCESS)return void l.error(e);l.success(e)}else{const{msg:e,code:r}=await a(C.id,s);if(r!==t.SUCCESS)return void l.error(e);l.success(e)}w(""),y(!1),h()}finally{e()}})).catch((r=>{l.error("表单校验失败"),e()}))})(e),children:"确定"},"confirm")],children:n(i,{form:b,layout:"vertical",initialValues:C,children:[d(i.Item,{name:"dictType",label:"字典类型",children:d(c,{readOnly:!0,disabled:!0})}),d(i.Item,{name:"dictLabel",label:"数据标签",rules:[{required:!0,message:"请输入数据标签"}],children:d(c,{placeholder:"请输入数据标签"})}),d(i.Item,{name:"dictValue",label:"数据键值",rules:[{required:!0,message:"请输入数据键值"}],children:d(c,{placeholder:"请输入数据键值"})}),d(i.Item,{name:"dictSort",label:"显示排序",rules:[{required:!0,message:"数据顺序不能为空"}],children:d(u,{style:{width:"100%"},min:0})}),d(i.Item,{name:"remark",label:"备注",children:d(c.TextArea,{placeholder:"请输入内容"})})]})})}));export{h as default};
