import{b as e}from"./index-Bezab7UT.js";import{g as t,a as l}from"./index-CL_tkCrR.js";import{r as n,U as r,_ as a,V as i,W as o,X as s,Y as c,w as d,Z as u,$ as h,j as m,a0 as g,b as p,F as f,a1 as b,a2 as v,p as y,B as S,a3 as C,a4 as w,a5 as x,a6 as $,a7 as k,a8 as I,a9 as j,aa as A,ab as O,ac as E,ad as T,ae as M,af as z,K as N,P as H,I as R,ag as L,e as B,ah as F,k as _,m as K,O as U,R as V,C as q,S as W,L as D,ai as P,aj as X}from"./index-CZh0p_oH.js";import{S as G,P as Y}from"./ProCard-YIQO1D1F.js";import{D as Z}from"./index-DW8FjFu4.js";import{T as J}from"./index-DAFMvJY8.js";import{T as Q}from"./index--TOMb3kV.js";import{R as ee}from"./index-DQ26OUIh.js";import{S as te}from"./index-BWNE0s_I.js";import{C as le,P as ne,u as re}from"./useMultipleSelect-gcGQZKVm.js";import{D as ae}from"./useShowArrow-CUxPklP2.js";import"./iconUtil-DYt6AuPS.js";import"./List-DqGO3k9Q.js";const ie=e=>{const t=new Map;return e.forEach(((e,l)=>{t.set(e,l)})),t},oe=[];function se(e,t){const l=e.filter((e=>t.has(e)));return e.length===l.length?e:l}function ce(e){return Array.from(e).join(";")}const de=e=>{const{renderedText:t,renderedEl:l,item:r,checked:a,disabled:i,prefixCls:u,onClick:h,onRemove:m,showRemove:g}=e,p=o(`${u}-content-item`,{[`${u}-content-item-disabled`]:i||r.disabled,[`${u}-content-item-checked`]:a&&!r.disabled});let f;"string"!=typeof t&&"number"!=typeof t||(f=String(t));const[b]=s("Transfer",c.Transfer),v={className:p,title:f},y=n.createElement("span",{className:`${u}-content-item-text`},l);return g?n.createElement("li",Object.assign({},v),y,n.createElement("button",{type:"button",disabled:i||r.disabled,className:`${u}-content-item-remove`,"aria-label":null==b?void 0:b.remove,onClick:()=>null==m?void 0:m(r)},n.createElement(d,null))):(v.onClick=i||r.disabled?void 0:e=>h(r,e),n.createElement("li",Object.assign({},v),n.createElement(le,{className:`${u}-checkbox`,checked:a,disabled:i||r.disabled}),y))},ue=n.memo(de),he=["handleFilter","handleClear","checkedKeys"],me=(e,t)=>{const{prefixCls:l,filteredRenderItems:a,selectedKeys:i,disabled:s,showRemove:c,pagination:d,onScroll:u,onItemSelect:h,onItemRemove:m}=e,[g,p]=n.useState(1),f=n.useMemo((()=>{if(!d)return null;return(e=>Object.assign(Object.assign({},{simple:!0,showSizeChanger:!1,showLessItems:!1}),e))("object"==typeof d?d:{})}),[d]),[b,v]=r(10,{value:null==f?void 0:f.pageSize});n.useEffect((()=>{if(f){const e=Math.ceil(a.length/b);p(Math.min(g,e))}}),[a,f,b]);const y=(e,t)=>{h(e.key,!i.includes(e.key),t)},S=e=>{null==m||m([e.key])},C=n.useMemo((()=>f?a.slice((g-1)*b,g*b):a),[g,a,f,b]);n.useImperativeHandle(t,(()=>({items:C})));const w=f?n.createElement(ne,{size:"small",disabled:s,simple:f.simple,pageSize:b,showLessItems:f.showLessItems,showSizeChanger:f.showSizeChanger,className:`${l}-pagination`,total:a.length,current:g,onChange:e=>{p(e)},onShowSizeChange:(e,t)=>{p(e),v(t)}}):null,x=o(`${l}-content`,{[`${l}-content-show-remove`]:c});return n.createElement(n.Fragment,null,n.createElement("ul",{className:x,onScroll:u},(C||[]).map((e=>{let{renderedEl:t,renderedText:r,item:a}=e;return n.createElement(ue,{key:a.key,item:a,renderedText:r,renderedEl:t,prefixCls:l,showRemove:c,onClick:y,onRemove:S,checked:i.includes(a.key),disabled:s||a.disabled})}))),w)},ge=n.forwardRef(me),pe=e=>{const{placeholder:t="",value:l,prefixCls:r,disabled:a,onChange:i,handleClear:o}=e,s=n.useCallback((e=>{null==i||i(e),""===e.target.value&&(null==o||o())}),[i]);return n.createElement(u,{placeholder:t,className:r,value:l,onChange:s,disabled:a,allowClear:!0,prefix:n.createElement(h,null)})},fe=()=>null;function be(e){return e.filter((e=>!e.disabled)).map((e=>e.key))}const ve=e=>{const{prefixCls:t,dataSource:l=[],titleText:r="",checkedKeys:a,disabled:i,showSearch:s=!1,style:c,searchPlaceholder:d,notFoundContent:u,selectAll:h,deselectAll:S,selectCurrent:C,selectInvert:w,removeAll:x,removeCurrent:$,showSelectAll:k=!0,showRemove:I,pagination:j,direction:A,itemsUnit:O,itemUnit:E,selectAllLabel:T,selectionsIcon:M,footer:z,renderList:N,onItemSelectAll:H,onItemRemove:R,handleFilter:L,handleClear:B,filterOption:F,render:_=fe}=e,K=(e=>e&&"object"==typeof e?Object.assign(Object.assign({},e),{defaultValue:e.defaultValue||""}):{defaultValue:"",placeholder:""})(s),[U,V]=n.useState(K.defaultValue),q=n.useRef({}),W=e=>{V(e.target.value),L(e)},D=()=>{V(""),B()},P=e=>{const t=_(e),l=!(!(n=t)||y.isValidElement(n)||"[object Object]"!==Object.prototype.toString.call(n));var n;return{item:e,renderedEl:l?t.label:t,renderedText:l?t.value:t}},X=n.useMemo((()=>Array.isArray(u)?u["left"===A?0:1]:u),[u,A]),[G,Y]=n.useMemo((()=>{const e=[],t=[];return l.forEach((l=>{const n=P(l);U&&!((e,t)=>F?F(U,t,A):e.includes(U))(n.renderedText,l)||(e.push(l),t.push(n))})),[e,t]}),[l,U]),Z=n.useMemo((()=>G.filter((e=>a.includes(e.key)&&!e.disabled))),[a,G]),J=n.useMemo((()=>{if(0===Z.length)return"none";const e=ie(a);return G.every((t=>e.has(t.key)||!!t.disabled))?"all":"part"}),[a,Z]),Q=n.useMemo((()=>{const l=s?m("div",{className:`${t}-body-search-wrapper`,children:m(pe,{prefixCls:`${t}-search`,onChange:W,handleClear:D,placeholder:K.placeholder||d,value:U,disabled:i})}):null,{customize:n,bodyContent:r}=(e=>{let t=N?N(Object.assign(Object.assign({},e),{onItemSelect:(t,l)=>e.onItemSelect(t,l)})):null;const l=!!t;return l||(t=m(ge,{...Object.assign({ref:q},e)})),{customize:l,bodyContent:t}})(Object.assign(Object.assign({},g(e,he)),{filteredItems:G,filteredRenderItems:Y,selectedKeys:a}));let c;return c=n?m("div",{className:`${t}-body-customize-wrapper`,children:r}):G.length?r:m("div",{className:`${t}-body-not-found`,children:X}),p("div",{className:o(`${t}-body`,{[`${t}-body-with-search`]:s}),children:[l,c]})}),[s,t,d,U,i,a,G,Y,X]),ee=m(le,{disabled:0===l.filter((e=>!e.disabled)).length||i,checked:"all"===J,indeterminate:"part"===J,className:`${t}-checkbox`,onChange:()=>{null==H||H(G.filter((e=>!e.disabled)).map((e=>{let{key:t}=e;return t})),"all"!==J)}}),te=z&&(z.length<2?z(e):z(e,{direction:A})),ne=o(t,{[`${t}-with-pagination`]:!!j,[`${t}-with-footer`]:!!te}),re=te?m("div",{className:`${t}-footer`,children:te}):null,ae=!I&&!j&&ee;let oe;oe=I?[j?{key:"removeCurrent",label:$,onClick(){var e;const t=be(((null===(e=q.current)||void 0===e?void 0:e.items)||[]).map((e=>e.item)));null==R||R(t)}}:null,{key:"removeAll",label:x,onClick(){null==R||R(be(G))}}].filter(Boolean):[{key:"selectAll",label:"all"===J?S:h,onClick(){const e=be(G);null==H||H(e,e.length!==a.length)}},j?{key:"selectCurrent",label:C,onClick(){var e;const t=(null===(e=q.current)||void 0===e?void 0:e.items)||[];null==H||H(be(t.map((e=>e.item))),!0)}}:null,{key:"selectInvert",label:w,onClick(){var e;const t=be(((null===(e=q.current)||void 0===e?void 0:e.items)||[]).map((e=>e.item))),l=new Set(a),n=new Set(l);t.forEach((e=>{l.has(e)?n.delete(e):n.add(e)})),null==H||H(Array.from(n),"replace")}}];const se=m(b,{className:`${t}-header-dropdown`,menu:{items:oe},disabled:i,children:(ce=M,void 0!==ce?M:m(v,{}))});var ce;return p("div",{className:ne,style:c,children:[p("div",{className:`${t}-header`,children:[k?p(f,{children:[ae,se]}):null,m("span",{className:`${t}-header-selected`,children:((e,t)=>{if(T)return"function"==typeof T?T({selectedCount:e,totalCount:t}):T;return p(f,{children:[(e>0?`${e}/`:"")+t," ",t>1?O:E]})})(Z.length,G.length)}),m("span",{className:`${t}-header-title`,children:r})]}),Q,re]})},ye=e=>{const{disabled:t,moveToLeft:l,moveToRight:r,leftArrowText:a="",rightArrowText:i="",leftActive:o,rightActive:s,className:c,style:d,direction:u,oneWay:h}=e;return n.createElement("div",{className:c,style:d},n.createElement(S,{type:"primary",size:"small",disabled:t||!s,onClick:r,icon:"rtl"!==u?n.createElement(C,null):n.createElement(w,null)},i),!h&&n.createElement(S,{type:"primary",size:"small",disabled:t||!o,onClick:l,icon:"rtl"!==u?n.createElement(w,null):n.createElement(C,null)},a))},Se=e=>{const{antCls:t,componentCls:l,listHeight:n,controlHeightLG:r}=e,a=`${t}-table`,i=`${t}-input`;return{[`${l}-customize-list`]:{[`${l}-list`]:{flex:"1 1 50%",width:"auto",height:"auto",minHeight:n,minWidth:0},[`${a}-wrapper`]:{[`${a}-small`]:{border:0,borderRadius:0,[`${a}-selection-column`]:{width:r,minWidth:r}},[`${a}-pagination${a}-pagination`]:{margin:0,padding:e.paddingXS}},[`${i}[disabled]`]:{backgroundColor:"transparent"}}}},Ce=(e,t)=>{const{componentCls:l,colorBorder:n}=e;return{[`${l}-list`]:{borderColor:t,"&-search:not([disabled])":{borderColor:n}}}},we=e=>{const{componentCls:t}=e;return{[`${t}-status-error`]:Object.assign({},Ce(e,e.colorError)),[`${t}-status-warning`]:Object.assign({},Ce(e,e.colorWarning))}},xe=e=>{const{componentCls:t,colorBorder:l,colorSplit:n,lineWidth:r,itemHeight:a,headerHeight:i,transferHeaderVerticalPadding:o,itemPaddingBlock:s,controlItemBgActive:c,colorTextDisabled:d,colorTextSecondary:u,listHeight:h,listWidth:m,listWidthLG:g,fontSizeIcon:p,marginXS:f,paddingSM:b,lineType:v,antCls:y,iconCls:S,motionDurationSlow:C,controlItemBgHover:w,borderRadiusLG:x,colorBgContainer:$,colorText:k,controlItemBgActiveHover:E}=e,T=I(e.calc(x).sub(r).equal());return{display:"flex",flexDirection:"column",width:m,height:h,border:`${I(r)} ${v} ${l}`,borderRadius:e.borderRadiusLG,"&-with-pagination":{width:g,height:"auto"},"&-search":{[`${S}-search`]:{color:d}},"&-header":{display:"flex",flex:"none",alignItems:"center",height:i,padding:`${I(e.calc(o).sub(r).equal())} ${I(b)} ${I(o)}`,color:k,background:$,borderBottom:`${I(r)} ${v} ${n}`,borderRadius:`${I(x)} ${I(x)} 0 0`,"> *:not(:last-child)":{marginInlineEnd:4},"> *":{flex:"none"},"&-title":Object.assign(Object.assign({},A),{flex:"auto",textAlign:"end"}),"&-dropdown":Object.assign(Object.assign({},O()),{fontSize:p,transform:"translateY(10%)",cursor:"pointer","&[disabled]":{cursor:"not-allowed"}})},"&-body":{display:"flex",flex:"auto",flexDirection:"column",fontSize:e.fontSize,minHeight:0,"&-search-wrapper":{position:"relative",flex:"none",padding:b}},"&-content":{flex:"auto",margin:0,padding:0,overflow:"auto",listStyle:"none",borderRadius:`0 0 ${T} ${T}`,"&-item":{display:"flex",alignItems:"center",minHeight:a,padding:`${I(s)} ${I(b)}`,transition:`all ${C}`,"> *:not(:last-child)":{marginInlineEnd:f},"> *":{flex:"none"},"&-text":Object.assign(Object.assign({},A),{flex:"auto"}),"&-remove":Object.assign(Object.assign({},j(e)),{color:l,"&:hover, &:focus":{color:u}}),[`&:not(${t}-list-content-item-disabled)`]:{"&:hover":{backgroundColor:w,cursor:"pointer"},[`&${t}-list-content-item-checked:hover`]:{backgroundColor:E}},"&-checked":{backgroundColor:c},"&-disabled":{color:d,cursor:"not-allowed"}},[`&-show-remove ${t}-list-content-item:not(${t}-list-content-item-disabled):hover`]:{background:"transparent",cursor:"default"}},"&-pagination":{padding:e.paddingXS,textAlign:"end",borderTop:`${I(r)} ${v} ${n}`,[`${y}-pagination-options`]:{paddingInlineEnd:e.paddingXS}},"&-body-not-found":{flex:"none",width:"100%",margin:"auto 0",color:d,textAlign:"center"},"&-footer":{borderTop:`${I(r)} ${v} ${n}`},"&-checkbox":{lineHeight:1}}},$e=e=>{const{antCls:t,iconCls:l,componentCls:n,marginXS:r,marginXXS:a,fontSizeIcon:i,colorBgContainerDisabled:o}=e;return{[n]:Object.assign(Object.assign({},k(e)),{position:"relative",display:"flex",alignItems:"stretch",[`${n}-disabled`]:{[`${n}-list`]:{background:o}},[`${n}-list`]:xe(e),[`${n}-operation`]:{display:"flex",flex:"none",flexDirection:"column",alignSelf:"center",margin:`0 ${I(r)}`,verticalAlign:"middle",gap:a,[`${t}-btn ${l}`]:{fontSize:i}}})}},ke=e=>{const{componentCls:t}=e;return{[`${t}-rtl`]:{direction:"rtl"}}},Ie=x("Transfer",(e=>{const t=$(e);return[$e(t),Se(t),we(t),ke(t)]}),(e=>{const{fontSize:t,lineHeight:l,controlHeight:n,controlHeightLG:r,lineWidth:a}=e,i=Math.round(t*l);return{listWidth:180,listHeight:200,listWidthLG:250,headerHeight:r,itemHeight:n,itemPaddingBlock:(n-i)/2,transferHeaderVerticalPadding:Math.ceil((r-a-i)/2)}})),je=e=>{const{dataSource:t,targetKeys:l=[],selectedKeys:d,selectAllLabels:u=[],operations:h=[],style:g={},listStyle:f={},locale:b={},titles:v,disabled:y,showSearch:S=!1,operationStyle:C,showSelectAll:w,oneWay:x,pagination:$,status:k,prefixCls:I,className:j,rootClassName:A,selectionsIcon:O,filterOption:N,render:H,footer:R,children:L,rowKey:B,onScroll:F,onChange:_,onSearch:K,onSelectChange:U}=e,{getPrefixCls:V,renderEmpty:q,direction:W,transfer:D}=n.useContext(E),P=V("transfer",I),[X,G,Y]=Ie(P),[Z,J,Q]=((e,t,l)=>{const r=n.useMemo((()=>(e||[]).map((e=>t?Object.assign(Object.assign({},e),{key:t(e)}):e))),[e,t]),[a,i]=n.useMemo((()=>{var e;const t=[],n=Array.from({length:null!==(e=null==l?void 0:l.length)&&void 0!==e?e:0}),a=ie(l||[]);return r.forEach((e=>{if(a.has(e.key)){const t=a.get(e.key);n[t]=e}else t.push(e)})),[t,n]}),[r,l]);return[r,a.filter(Boolean),i.filter(Boolean)]})(t,B,l),[ee,te,le,ne]=function(e,t,l){const[o,s]=n.useMemo((()=>[new Set(e.map((e=>null==e?void 0:e.key))),new Set(t.map((e=>null==e?void 0:e.key)))]),[e,t]),[c,d]=r(oe,{value:l}),u=n.useMemo((()=>se(c,o)),[c,o]),h=n.useMemo((()=>se(c,s)),[c,s]);n.useEffect((()=>{d([].concat(a(se(c,o)),a(se(c,s))))}),[ce(o),ce(s)]);const m=i((e=>{d([].concat(a(e),a(h)))})),g=i((e=>{d([].concat(a(u),a(e)))}));return[u,h,m,g]}(J,Q,d),[de,ue]=re((e=>e.key)),[he,me]=re((e=>e.key)),ge=n.useCallback(((e,t)=>{if("left"===e){const e="function"==typeof t?t(ee||[]):t;le(e)}else{const e="function"==typeof t?t(te||[]):t;ne(e)}}),[ee,te]),pe=(e,t)=>{("left"===e?ue:me)(t)},fe=n.useCallback(((e,t)=>{"left"===e?null==U||U(t,te):null==U||U(ee,t)}),[ee,te]),be=e=>{const t="right"===e?ee:te,n=(e=>{const t=new Map;return e.forEach(((e,l)=>{let{disabled:n,key:r}=e;n&&t.set(r,l)})),t})(Z),r=t.filter((e=>!n.has(e))),a=ie(r),i="right"===e?r.concat(l):l.filter((e=>!a.has(e))),o="right"===e?"left":"right";ge(o,[]),fe(o,[]),null==_||_(i,e,r)},Se=(e,t,l)=>{ge(e,(n=>{let r=[];if("replace"===l)r=t;else if(l)r=Array.from(new Set([].concat(a(n),a(t))));else{const e=ie(t);r=n.filter((t=>!e.has(t)))}return fe(e,r),r})),pe(e,null)},Ce=(t,l,n,r)=>{const i="left"===t,o=a(i?ee:te),s=new Set(o),c=a(i?J:Q).filter((e=>!(null==e?void 0:e.disabled))),d=c.findIndex((e=>e.key===l));r&&o.length>0?((e,t,l,n)=>{("left"===e?de:he)(n,t,l)})(t,c,s,d):((e,t,l,n,r)=>{t.has(l)&&(t.delete(l),pe(e,null)),n&&(t.add(l),pe(e,r))})(t,s,l,n,d);const u=Array.from(s);fe(t,u),e.selectedKeys||ge(t,u)},we=e=>"function"==typeof f?f({direction:e}):f||{},xe=n.useContext(T),{hasFeedback:$e,status:ke}=xe,je=z(ke,k),Ae=!L&&$,Oe=Q.filter((e=>te.includes(e.key)&&!e.disabled)).length>0,Ee=J.filter((e=>ee.includes(e.key)&&!e.disabled)).length>0,Te=o(P,{[`${P}-disabled`]:y,[`${P}-customize-list`]:!!L,[`${P}-rtl`]:"rtl"===W},M(P,je,$e),null==D?void 0:D.className,j,A,G,Y),[Me]=s("Transfer",c.Transfer),ze=(Ne=Me,Object.assign(Object.assign(Object.assign({},Ne),{notFoundContent:(null==q?void 0:q("Transfer"))||m(ae,{componentName:"Transfer"})}),b));var Ne;const[He,Re]=(e=>{var t;return null!==(t=null!=v?v:e.titles)&&void 0!==t?t:[]})(ze),Le=null!=O?O:null==D?void 0:D.selectionsIcon;return X(p("div",{className:Te,style:Object.assign(Object.assign({},null==D?void 0:D.style),g),children:[m(ve,{...Object.assign({prefixCls:`${P}-list`,titleText:He,dataSource:J,filterOption:N,style:we("left"),checkedKeys:ee,handleFilter:e=>null==K?void 0:K("left",e.target.value),handleClear:()=>null==K?void 0:K("left",""),onItemSelect:(e,t,l)=>{Ce("left",e,t,null==l?void 0:l.shiftKey)},onItemSelectAll:(e,t)=>{Se("left",e,t)},render:H,showSearch:S,renderList:L,footer:R,onScroll:e=>{null==F||F("left",e)},disabled:y,direction:"rtl"===W?"right":"left",showSelectAll:w,selectAllLabel:u[0],pagination:Ae,selectionsIcon:Le},ze)}),m(ye,{className:`${P}-operation`,rightActive:Ee,rightArrowText:h[0],moveToRight:()=>{be("right"),pe("right",null)},leftActive:Oe,leftArrowText:h[1],moveToLeft:()=>{be("left"),pe("left",null)},style:C,disabled:y,direction:W,oneWay:x}),m(ve,{...Object.assign({prefixCls:`${P}-list`,titleText:Re,dataSource:Q,filterOption:N,style:we("right"),checkedKeys:te,handleFilter:e=>null==K?void 0:K("right",e.target.value),handleClear:()=>null==K?void 0:K("right",""),onItemSelect:(e,t,l)=>{Ce("right",e,t,null==l?void 0:l.shiftKey)},onItemSelectAll:(e,t)=>{Se("right",e,t)},onItemRemove:e=>{ge("right",[]),null==_||_(l.filter((t=>!e.includes(t))),"left",a(e))},render:H,showSearch:S,renderList:L,footer:R,onScroll:e=>{null==F||F("right",e)},disabled:y,direction:"rtl"===W?"left":"right",showSelectAll:w,selectAllLabel:u[1],showRemove:x,pagination:Ae,selectionsIcon:Le},ze)})]}))};je.List=ve,je.Search=pe,je.Operation=ye;const Ae=e=>m(L,{...e,component:()=>m("svg",{width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false",viewBox:"0 0 1024 1024",children:m("path",{d:"M864 64H160C107 64 64 107 64 160v704c0 53 43 96 96 96h704c53 0 96-43 96-96V160c0-53-43-96-96-96z m-12 800H172c-6.6 0-12-5.4-12-12V172c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v680c0 6.6-5.4 12-12 12z"})})}),Oe=e=>m(L,{...e,component:()=>m("svg",{width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false",viewBox:"0 0 1024 1024",children:m("path",{d:"M864 64H160C107 64 64 107 64 160v704c0 53 43 96 96 96h704c53 0 96-43 96-96V160c0-53-43-96-96-96z"})})}),Ee=e=>m(L,{...e,component:()=>m("svg",{width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false",viewBox:"0 0 1024 1024",children:m("path",{d:"M16 512c0 273.932 222.066 496 496 496s496-222.068 496-496S785.932 16 512 16 16 238.066 16 512z m496 368V144c203.41 0 368 164.622 368 368 0 203.41-164.622 368-368 368z"})})}),Te=e=>m(L,{...e,component:()=>m("svg",{width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false",viewBox:"0 0 1024 1024",children:m("path",{d:"M249.787181 328.164281A74.553827 74.553827 0 1 0 175.233354 254.884879a73.916615 73.916615 0 0 0 74.553827 73.279402zM509.769757 328.164281A74.553827 74.553827 0 1 0 435.21593 254.884879 74.553827 74.553827 0 0 0 509.769757 328.164281zM769.752334 328.164281A74.553827 74.553827 0 1 0 695.835719 254.884879a73.916615 73.916615 0 0 0 73.916615 73.916614zM249.787181 588.78407a74.553827 74.553827 0 1 0-74.553827-74.553827 73.916615 73.916615 0 0 0 74.553827 74.553827zM509.769757 588.78407a74.553827 74.553827 0 1 0-74.553827-74.553827A74.553827 74.553827 0 0 0 509.769757 588.78407zM769.752334 588.78407a74.553827 74.553827 0 1 0-73.916615-74.553827 74.553827 74.553827 0 0 0 73.916615 74.553827zM249.787181 848.766646a74.553827 74.553827 0 1 0-74.553827-74.553827 73.916615 73.916615 0 0 0 74.553827 74.553827zM509.769757 848.766646a74.553827 74.553827 0 1 0-74.553827-74.553827A74.553827 74.553827 0 0 0 509.769757 848.766646zM769.752334 848.766646a74.553827 74.553827 0 1 0-73.916615-74.553827 74.553827 74.553827 0 0 0 73.916615 74.553827z",fill:"#555555","p-id":"29002"})})}),Me=N,ze=({value:e,onChange:t})=>{const[l,r]=n.useState(!1),[a,i]=n.useState("Outlined"),o=n.useMemo((()=>Object.keys(Me).filter((e=>e.includes(a)&&"getTwoToneColor"!==e&&"setTwoToneColor"!==e))),[a]),s=e?Me[e]:Te;return m(H,{title:"选择图标",placement:"bottomRight",arrow:!0,onOpenChange:e=>{r(e)},trigger:"click",open:l,content:p("div",{style:{width:600},children:[m(G,{options:[{label:"线框风格",value:"Outlined",icon:m(Ae,{})},{label:"实底风格",value:"Filled",icon:m(Oe,{})},{label:"双色风格",value:"TwoTone",icon:m(Ee,{})}],block:!0,onChange:e=>{i(e)}}),m(Y,{gutter:[8,8],wrap:!0,style:{marginTop:8},bodyStyle:{height:200,overflowY:"auto",paddingInline:0,paddingBlock:0},children:o.map((l=>{const n=Me[l];return m(Y,{colSpan:{xs:3,sm:3,md:3,lg:3,xl:3},layout:"center",bordered:!0,hoverable:!0,boxShadow:e===l,onClick:()=>{null==t||t(l),r(!1)},children:m(n,{style:{fontSize:"16px"}})},l)}))})]}),children:m(R,{type:"text",value:e,placeholder:"点击选择图标",readOnly:!0,onChange:e=>{null==t||t(e.target.value)},addonBefore:m(s,{style:{cursor:"pointer"},onClick:()=>r(!l)})})})},Ne=n.forwardRef((({onConfirm:r},a)=>{const[i]=B.useForm(),[o,s]=n.useState(!1),[c,d]=n.useState({}),[u,h]=n.useState(new Map),[g,b]=n.useState(new Map),[v,y]=n.useState(new Map),[S,C]=n.useState(new Map),[w,x]=n.useState(new Map),[$,k]=n.useState(),[I,j]=n.useState(),[A,O]=n.useState(""),[E,T]=n.useState([]),[M,z]=n.useState([]);n.useImperativeHandle(a,(()=>({async showAddFormDrawer(e){N();const{data:t,msg:l,code:n}=await U({});if(n===_.SUCCESS){if(j(t),e>0){const{data:t,msg:l,code:n}=await F(e);if(n!==_.SUCCESS)return void K.error(l);k(t),i.setFieldValue("parentId",t.id)}s(!0)}else K.error(l)},async showEditFormDrawer(e){const{data:t,msg:l,code:n}=await F(e);if(n!==_.SUCCESS)return void K.error(l);z(t.apis);const{data:r,msg:a,code:o}=await U({});if(o!==_.SUCCESS)return void K.error(a);const c=He(t,r);k(c),d(t),O(t.menuType),i.setFieldsValue(t),j(r),s(!0)}}))),n.useEffect((()=>{(async()=>{const{data:n,msg:r,code:a}=await t("admin_sys_yes_no");if(a!==_.SUCCESS)return void K.error(r);h(l(n));const{data:i,msg:o,code:s}=await t("admin_sys_yes_no");if(s!==_.SUCCESS)return void K.error(o);b(l(i));const{data:c,msg:d,code:u}=await t("admin_sys_menu_show_hide");if(u!==_.SUCCESS)return void K.error(d);y(l(c));const{data:m,msg:g,code:p}=await t("admin_sys_yes_no");if(p!==_.SUCCESS)return void K.error(g);C(l(m));const{data:f,msg:v,code:S}=await t("admin_sys_menu_type");if(S!==_.SUCCESS)return void K.error(v);x(l(f));const{data:w,msg:$,code:k}=await e({});k===_.SUCCESS?T(w):K.error($)})()}),[]);const N=()=>{c.id>0?d({}):d({id:0}),z([]),O(""),setTimeout((()=>i.resetFields()),100)};return m(Z,{title:c.id>0?"编辑":"新增",getContainer:!1,width:800,open:o,maskClosable:!1,keyboard:!1,onClose:()=>{N(),s(!1)},destroyOnClose:!0,extra:[p(W,{children:[m(D,{onClick:e=>{N(),s(!1),e()},children:"取消"},"cancel1"),m(D,{type:"primary",onClick:e=>(e=>{i.validateFields().then((async t=>{try{if(c.id<=0){const{msg:e,code:l}=await P(t);if(l!==_.SUCCESS)return void K.error(e);K.success(e)}else{const{msg:e,code:l}=await X(c.id,t);if(l!==_.SUCCESS)return void K.error(e);K.success(e)}}finally{e()}N(),s(!1),r()})).catch((t=>{K.error("表单校验失败"),e()}))})(e),children:"确定"},"confirm2")]},"space")],children:m(B,{form:i,layout:"vertical",initialValues:c,onValuesChange:(e,t)=>{O(t.menuType)},children:p(V,{gutter:24,children:[m(q,{span:24,children:m(B.Item,{name:"parentId",label:"上级菜单",rules:[{required:!0,message:"选择上级菜单"}],children:m(J,{showSearch:!0,style:{width:"100%"},value:$,treeNodeFilterProp:"title",fieldNames:{label:"title",value:"id",children:"children"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"选择上级菜单",allowClear:!0,treeDefaultExpandAll:!0,onChange:e=>{k(e)},treeData:I})})}),m(q,{span:18,children:m(B.Item,{name:"title",label:"菜单标题",rules:[{required:!0,message:"请输入路由名称"}],children:m(R,{placeholder:"请输入菜单标题"})})}),m(q,{span:6,children:m(B.Item,{name:"sort",label:"排序",rules:[{required:!0,message:"请输入排序"}],children:m(Q,{style:{width:"100%"},min:0})})}),m(q,{span:24,children:m(B.Item,{name:"icon",label:"图标",children:m(ze,{})})}),m(q,{span:24,children:m(B.Item,{name:"menuType",label:"菜单类型",rules:[{required:!0,message:"请输入菜单类型"}],children:m(ee.Group,{children:Array.from(w).map((([e,t])=>m(ee,{value:e,children:t},e)))})})}),("1"===A||"2"===A)&&p(f,{children:[m(q,{span:12,children:m(B.Item,{name:"path",label:"路由地址",rules:[{required:!0,message:"请输入路由地址"}],children:m(R,{placeholder:"请输入路由地址"})})}),m(q,{span:12,children:m(B.Item,{name:"isHidden",label:"是否隐藏",rules:[{required:!0,message:"请输入是否隐藏"}],children:m(te,{placeholder:"请选择",children:Array.from(v).map((([e,t])=>m(te.Option,{value:e,children:t},e)))})})}),"1"===A&&m(q,{span:12,children:m(B.Item,{name:"redirect",label:"跳转路由",rules:[{required:!0,message:"请输入跳转路由"}],children:m(R,{placeholder:"请输入跳转路由"})})}),"2"===A&&p(f,{children:[m(q,{span:12,children:m(B.Item,{name:"element",label:"组件路径",rules:[{required:!0,message:"请输入组件路径"}],children:m(R,{placeholder:"请输入组件路径"})})}),m(q,{span:12,children:m(B.Item,{name:"isAffix",label:"是否固定",rules:[{required:!0,message:"请输入是否固定"}],children:m(te,{placeholder:"请选择",children:Array.from(g).map((([e,t])=>m(te.Option,{value:e,children:t},e)))})})}),m(q,{span:12,children:m(B.Item,{name:"isFrame",label:"是否内嵌",rules:[{required:!0,message:"请输入是否内嵌"}],children:m(te,{placeholder:"请选择",children:Array.from(u).map((([e,t])=>m(te.Option,{value:e,children:t},e)))})})}),m(q,{span:12,children:m(B.Item,{name:"isKeepAlive",label:"是否缓存",rules:[{required:!0,message:"请输入是否缓存"}],children:m(te,{placeholder:"请选择",children:Array.from(S).map((([e,t])=>m(te.Option,{value:e,children:t},e)))})})})]})]}),"3"===A&&m(q,{span:12,children:m(B.Item,{name:"permission",label:"权限标识",rules:[{required:!0,message:"请输入权限标识"}],children:m(R,{placeholder:"请输入权限标识"})})}),("2"===A||"3"===A)&&m(q,{span:24,children:m(B.Item,{name:"apis",label:"授权接口",children:m(je,{dataSource:E,showSearch:!0,filterOption:(e,t)=>t.description.indexOf(e)>-1,listStyle:{width:500,height:500},rowKey:e=>e.id,targetKeys:M,onChange:e=>{z(e)},onSearch:(e,t)=>{},render:e=>e.description||"未知API"})})})]})})})})),He=(e,t)=>{if(e)for(let l of t){if(e.parentId===l.id||e.id==l.id)return l;l.children&&He(e,l.children)}};export{Ne as default};
