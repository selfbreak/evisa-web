import{g as e,a}from"./index-DjQbBEY_.js";import{D as r,r as s,e as o,k as t,m as i,j as d,M as n,b as l,I as c,L as u}from"./index-DsQ3zqfA.js";import{S as m}from"./index-DzAJL26A.js";const p=e=>r.get("/admin-api/v1/app/user/user-country-code",{...e,pageIndex:null==e?void 0:e.current}),y=e=>r.delete("/admin-api/v1/app/user/user-country-code",{ids:e}),f=e=>r.download("/admin-api/v1/app/user/user-country-code/export",e),S=s.forwardRef((({onConfirm:p},y)=>{const[f]=o.useForm(),[S,h]=s.useState(!1),[g,v]=s.useState({}),[C,w]=s.useState(new Map);s.useImperativeHandle(y,(()=>({showAddFormModal(){b(),h(!0)},async showEditFormModal(e){const{data:a,msg:s,code:o}=await(e=>r.get("/admin-api/v1/app/user/user-country-code/"+e))(e);o===t.SUCCESS?(v(a),f.setFieldsValue(a),h(!0)):i.error(s)}}))),s.useEffect((()=>{(async()=>{const{data:r,msg:s,code:o}=await e("admin_sys_status");o===t.SUCCESS?w(a(r)):i.error(s)})()}),[]);const b=()=>{g.id>0?v({}):v({id:0}),setTimeout((()=>f.resetFields()),100)},F=e=>{f.validateFields().then((async a=>{try{if(g.id<=0){const{msg:e,code:o}=await(s=a,r.post("/admin-api/v1/app/user/user-country-code",s));if(o!==t.SUCCESS)return void i.error(e);i.success(e)}else{const{msg:e,code:s}=await((e,a)=>r.put("/admin-api/v1/app/user/user-country-code/"+e,a))(g.id,a);if(s!==t.SUCCESS)return void i.error(e);i.success(e)}}finally{e()}var s;b(),h(!1),p()})).catch((a=>{i.error("表单校验失败"),e()}))};return d(n,{title:g.id>0?"编辑":"新增",getContainer:!1,width:500,open:S,maskClosable:!1,keyboard:!1,onCancel:()=>{b(),h(!1)},destroyOnClose:!0,footer:[d(u,{onClick:e=>{b(),h(!1),e()},children:"取消"},"cancel"),d(u,{type:"primary",onClick:e=>F(e),children:"确定"},"confirm")],children:l(o,{form:f,layout:"vertical",initialValues:g,children:[d(o.Item,{name:"country",label:"国家地区",rules:[{required:!0,message:"请输入国家地区"}],children:d(c,{placeholder:"请输入国家地区"})}),d(o.Item,{name:"code",label:"区号",rules:[{required:!0,message:"请输入区号"}],children:d(c,{placeholder:"请输入区号"})}),d(o.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请输入状态"}],children:d(m,{placeholder:"请选择",children:Array.from(C).map((([e,a])=>d(m.Option,{value:e,children:a},e)))})})]})})})),h=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}));export{S as F,h as a,y as d,f as e,p as g};
