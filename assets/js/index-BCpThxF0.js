import{g as e,a as t}from"./index-CtceChyv.js";import{r as a,a5 as n,a6 as r,a7 as i,b6 as s,W as o,aR as l,aJ as c,aY as d,a$ as p,p as m,j as u,F as f,dQ as h,S as g,L as y,v as x,B as S,dR as b,dS as j,dT as v,y as w,dU as k,b as I,dV as O,k as E,m as C}from"./index-D-IVHDoI.js";import{H as T}from"./index-bsR-rlRx.js";import{p as $}from"./proTable-BUOzHjgg.js";import{f as _}from"./index-Ciy2PQr0.js";import N from"./FormModal-CyZt0ISZ.js";import z from"./UploadModal-B-CiTuxA.js";import{j as R}from"./index-DfxSAUZn.js";import{I as M}from"./index-rlgaR6Xe.js";import{P as F}from"./Table-BKjmlYXO.js";import"./index-DYkgl8k4.js";import"./index-BmY71qE9.js";import"./index-CnsyCBm7.js";import"./progress-B0Jjvvki.js";import"./index-BkQhF-eM.js";import"./index-CCfuh_3z.js";import"./useShowArrow-ClocURX7.js";import"./List-BMYn0cb8.js";import"./addEventListener-Cp1TlzXG.js";import"./ProCard-CnItPC_u.js";import"./useMultipleSelect-B3wr460w.js";import"./iconUtil-CWrigeQt.js";import"./index-YDSCSC3q.js";import"./index-DWD3YlTn.js";import"./Table-D1g2OiWf.js";import"./index-B2BQwB6j.js";import"./index-6Wy40Q-D.js";import"./index-CCN_IQVN.js";const D=e=>{const{value:t,formatter:n,precision:r,decimalSeparator:i,groupSeparator:s="",prefixCls:o}=e;let l;if("function"==typeof n)l=n(t);else{const e=String(t),n=e.match(/^(-?)(\d*)(\.(\d+))?$/);if(n&&"-"!==e){const e=n[1];let t=n[2]||"0",c=n[4]||"";t=t.replace(/\B(?=(\d{3})+(?!\d))/g,s),"number"==typeof r&&(c=c.padEnd(r,"0").slice(0,r>0?r:0)),c&&(c=`${i}${c}`),l=[a.createElement("span",{key:"int",className:`${o}-content-value-int`},e,t),c&&a.createElement("span",{key:"decimal",className:`${o}-content-value-decimal`},c)]}else l=e}return a.createElement("span",{className:`${o}-content-value`},l)},P=e=>{const{componentCls:t,marginXXS:a,padding:n,colorTextDescription:r,titleFontSize:s,colorTextHeading:o,contentFontSize:l,fontFamily:c}=e;return{[t]:Object.assign(Object.assign({},i(e)),{[`${t}-title`]:{marginBottom:a,color:r,fontSize:s},[`${t}-skeleton`]:{paddingTop:n},[`${t}-content`]:{color:o,fontSize:l,fontFamily:c,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:a},[`${t}-content-suffix`]:{marginInlineStart:a}}})}},H=n("Statistic",(e=>{const t=r(e,{});return[P(t)]}),(e=>{const{fontSizeHeading3:t,fontSize:a}=e;return{titleFontSize:a,contentFontSize:t}}));const B=e=>{const{prefixCls:t,className:n,rootClassName:r,style:i,valueStyle:d,value:p=0,title:m,valueRender:u,prefix:f,suffix:h,loading:g=!1,formatter:y,precision:x,decimalSeparator:S=".",groupSeparator:b=",",onMouseEnter:j,onMouseLeave:v}=e,w=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:k,direction:I,className:O,style:E}=s("statistic"),C=k("statistic",t),[T,$,_]=H(C),N=a.createElement(D,{decimalSeparator:S,groupSeparator:b,prefixCls:C,formatter:y,precision:x,value:p}),z=o(C,{[`${C}-rtl`]:"rtl"===I},O,n,r,$,_),R=l(w,{aria:!0,data:!0});return T(a.createElement("div",Object.assign({},R,{className:z,style:Object.assign(Object.assign({},E),i),onMouseEnter:j,onMouseLeave:v}),m&&a.createElement("div",{className:`${C}-title`},m),a.createElement(c,{paragraph:!1,loading:g,className:`${C}-skeleton`},a.createElement("div",{style:d,className:`${C}-content`},f&&a.createElement("span",{className:`${C}-content-prefix`},f),u?u(N):N,h&&a.createElement("span",{className:`${C}-content-suffix`},h)))))},L=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function U(e,t){const{format:a=""}=t,n=new Date(e).getTime(),r=Date.now();return function(e,t){let a=e;const n=/\[[^\]]*]/g,r=(t.match(n)||[]).map((e=>e.slice(1,-1))),i=t.replace(n,"[]"),s=L.reduce(((e,t)=>{let[n,r]=t;if(e.includes(n)){const t=Math.floor(a/r);return a-=t*r,e.replace(new RegExp(`${n}+`,"g"),(e=>{const a=e.length;return t.toString().padStart(a,"0")}))}return e}),i);let o=0;return s.replace(n,(()=>{const e=r[o];return o+=1,e}))}(Math.max(n-r,0),a)}const A=1e3/30;const W=e=>{const{value:t,format:n="HH:mm:ss",onChange:r,onFinish:i}=e,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["value","format","onChange","onFinish"]),o=d(),l=a.useRef(null),c=()=>{const e=function(e){return new Date(e).getTime()}(t);e>=Date.now()&&(l.current=setInterval((()=>{o(),null==r||r(e-Date.now()),e<Date.now()&&(null==i||i(),l.current&&(clearInterval(l.current),l.current=null))}),A))};a.useEffect((()=>(c(),()=>{l.current&&(clearInterval(l.current),l.current=null)})),[t]);return a.createElement(B,Object.assign({},s,{value:t,valueRender:e=>p(e,{title:void 0}),formatter:(e,t)=>U(e,Object.assign(Object.assign({},t),{format:n}))}))};B.Countdown=a.memo(W);const Y=()=>{const n=m.useRef(),r=m.useRef(),i=a.useRef(null),[s,o]=a.useState(new Map),[l,c]=a.useState(new Map),[d,p]=a.useState({}),D=()=>{var e;null==(e=n.current)||e.reload()},P=[{title:"UID",dataIndex:"id",width:80,align:"center"},{title:u(f,{children:h("passport.passportNumber")}),dataIndex:"passport_number",width:150,align:"center",hideInSearch:!0},{title:"护照图片",dataIndex:"passport_image",width:150,align:"center",hideInSearch:!0,render:(e,t)=>t.file_path?u(M,{width:40,height:40,src:"http://localhost:8011/"+t.file_path,preview:{src:"http://localhost:8011/"+t.file_path,toolbarRender:()=>null},style:{objectFit:"cover"}}):u("span",{children:"未上传"})},{title:u(f,{children:h("passport.firstName")}),dataIndex:"first_name",width:100,align:"center"},{title:u(f,{children:h("passport.lastName")}),dataIndex:"last_name",width:100,align:"center"},{title:u(f,{children:h("passport.sex")}),dataIndex:"gender",hideInSearch:!0,width:80,align:"center"},{title:u(f,{children:h("passport.countryRegion")}),dataIndex:"country_code",width:120,align:"center"},{title:u(f,{children:h("passport.dateOfBirth")}),dataIndex:"birth_date",hideInSearch:!0,width:100,align:"center"},{title:u(f,{children:h("passport.dateOfIssue")}),dataIndex:"issue_date",width:120,align:"center"},{title:u(f,{children:h("passport.dateOfExpiration")}),dataIndex:"expiration_date",width:140,align:"center"},{title:u(f,{children:h("passport.status")}),dataIndex:"status",valueType:"select",valueEnum:s,width:80,align:"center"},{title:u(f,{children:h("passport.createTime")}),dataIndex:"create_at",hideInSearch:!0,valueType:"dateTime",width:180,align:"center"},{title:u(f,{children:h("passport.createTime")}),dataIndex:"createdAt",valueType:"dateTimeRange",hideInTable:!0,search:{transform:e=>({beginCreatedAt:e[0],endCreatedAt:e[1]})}},{title:u(f,{children:h("passport.action")}),valueType:"option",align:"center",width:150,render:(e,t)=>u(T,{permission:["app:passport:apply"],children:u(g,{children:"0"===t.status?u(y,{type:"link",size:"small",icon:u(x,{}),onClick:e=>H(t.id,e),children:"申请"},"edit"):"1"===t.status?u(S,{type:"link",size:"small",icon:u(b,{}),onClick:()=>window.open(t.link,"_blank"),children:"去支付"},"external-link"):"2"===t.status?u(S,{type:"link",size:"small",icon:u(j,{style:{color:"#8c8c8c"}}),style:{color:"#8c8c8c"},children:"审核中"},"external-link-2"):"3"===t.status?u(S,{type:"link",size:"small",danger:!0,icon:u(v,{}),onClick:()=>window.open(t.link,"_blank"),children:"拒签"},"external-link-2"):"4"===t.status?u(S,{type:"link",size:"small",icon:u(w,{style:{color:"#faad14"}}),style:{color:"#faad14"},onClick:()=>window.open(t.link,"_blank"),children:"补充资料"},"external-link-2"):"5"===t.status?u(S,{type:"link",size:"small",icon:u(k,{style:{color:"green"}}),style:{color:"green"},onClick:()=>window.open(t.link,"_blank"),children:"申请通过"},"external-link-2"):u("span",{children:"-"})})})}];a.useEffect((()=>{(async()=>{const{data:a,msg:n,code:r}=await e("app_user_apply_type");if(r!==E.SUCCESS)return void C.error(n);o(t(a));const{data:i,msg:s,code:l}=await e("app_user_apply_type");l===E.SUCCESS?c(t(i)):C.error(s)})()}),[]);const H=(e,t)=>{var a;null==(a=i.current)||a.showEditFormModal(e),setTimeout((()=>t()),1e3)};return I(f,{children:[u(F,{className:"ant-pro-table-scroll",columns:P,actionRef:n,formRef:r,bordered:!0,cardBordered:!0,defaultSize:"small",scroll:{x:"2000",y:"100%"},request:async e=>{const{data:t}=await R(e);return p(t.extend),_(t)},columnsState:{persistenceKey:"use-pro-table-key",persistenceType:"localStorage"},options:{reload:!0,density:!0,fullScreen:!0},rowKey:"id",search:{labelWidth:"auto",showHiddenNum:!0},pagination:$,dateFormatter:"string",headerTitle:u(f,{children:h("passport.passportNumber")}),toolBarRender:()=>[u(T,{permission:["app:passport:upload"],children:u(z,{maxSize:10,accept:"image/png,image/jpeg",onSuccess:D},"addTable")},"addTable")],footer:()=>d&&u(B,{title:"余额 总计",value:d.money,valueStyle:{color:O.base}})}),u(N,{ref:i,onConfirm:()=>{var e;null==(e=n.current)||e.reload(!1)}})]})};export{Y as default};
