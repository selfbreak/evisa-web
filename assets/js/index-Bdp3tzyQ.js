import{D as e,r as i,b as l,dF as n,j as t,F as d,k as s}from"./index-CZh0p_oH.js";import{C as o}from"./index-DoMnVB04.js";import{P as a}from"./progress-DeWSa0eq.js";import{D as r}from"./index-B8N73VGL.js";import{F as c}from"./Table-DWGBDBqS.js";import"./addEventListener-sA_wUh1h.js";import"./List-DqGO3k9Q.js";import"./iconUtil-DYt6AuPS.js";import"./useMultipleSelect-gcGQZKVm.js";import"./index-DQ26OUIh.js";import"./index-BWNE0s_I.js";import"./useShowArrow-CUxPklP2.js";import"./index-CqN5Ooqi.js";const m=()=>{const[m,p]=i.useState(),[h,u]=i.useState();i.useEffect((()=>{(async()=>{const{data:i,code:l}=await e.get("/admin-api/v1/admin/sys/sys-monitor");if(l===s.SUCCESS){const e=[];i.diskList.forEach(((i,l)=>{let n={key:String(l),path:i.path,fs:i.fstype,total:i.total+"M",available:i.free+"M",used:i.used+"M",percentage:i.usedPercent+"%"};e.push(n)})),u(e),p(i)}})()}),[]);return l(n,{children:[(null==m?void 0:m.cpu)&&l("div",{className:"monitor-item-cpu",children:[t(o,{title:"CPU使用率",style:{flex:1},children:l("div",{style:{textAlign:"center"},children:[t(a,{type:"circle",percent:null==m?void 0:m.cpu.Percent,format:e=>`${e}%`}),t(r,{}),l("div",{style:{textAlign:"left"},children:[l("div",{className:"monitor-item",children:[t("span",{children:"CPU主频:"}),t("span",{children:null==m?void 0:m.cpu.cpuInfo[0].modelName})]}),t(r,{}),l("div",{className:"monitor-item",children:[t("span",{children:"核心数:"}),t("span",{children:null==m?void 0:m.cpu.cpuNum})]})]})]})}),t(o,{title:"内存使用率",style:{flex:1},children:l("div",{style:{textAlign:"center"},children:[t(a,{type:"circle",percent:null==m?void 0:m.mem.usage,format:e=>`${e}%`}),t(r,{}),l("div",{style:{textAlign:"left"},children:[l("div",{className:"monitor-item",children:[t("span",{children:"总内存:"}),l("span",{children:[null==m?void 0:m.mem.total,"G"]})]}),t(r,{}),l("div",{className:"monitor-item",children:[t("span",{children:"已用内存:"}),l("span",{children:[null==m?void 0:m.mem.used,"G"]})]})]})]})}),t(o,{title:"磁盘信息",style:{flex:1},children:l("div",{style:{textAlign:"center"},children:[t(a,{type:"circle",percent:(null==m?void 0:m.disk.total)&&(null==m?void 0:m.disk.total)>0?Number((((null==m?void 0:m.disk.total)-(null==m?void 0:m.disk.free))/(null==m?void 0:m.disk.total)*100).toFixed(2)):0,format:e=>`${e}%`}),t(r,{}),l("div",{style:{textAlign:"left"},children:[l("div",{className:"monitor-item",children:[t("span",{children:"总磁盘:"}),l("span",{children:[null==m?void 0:m.disk.total,"G"]})]}),t(r,{}),l("div",{className:"monitor-item",children:[t("span",{children:"已用磁盘:"}),(null==m?void 0:m.disk.total)&&(null==m?void 0:m.disk.free)?`${((null==m?void 0:m.disk.total)-(null==m?void 0:m.disk.free)).toFixed(2)}G`:"0G"]})]})]})})]}),(null==m?void 0:m.os)&&t(o,{title:"Go运行环境",style:{marginBottom:10},children:l("div",{children:[l("div",{className:"monitor-item-go-version",children:[t("span",{children:"GO 版本:"}),t("span",{children:null==m?void 0:m.os.version})]}),t(r,{}),l("div",{className:"monitor-item-go-version",children:[t("span",{children:"Goroutine:"}),t("span",{children:null==m?void 0:m.os.numGoroutine})]}),t(r,{}),l("div",{className:"monitor-item-go-version",children:[t("span",{children:"项目地址:"}),t("span",{children:null==m?void 0:m.os.projectDir})]})]})}),(null==m?void 0:m.os)&&t(o,{title:"服务器信息",style:{marginBottom:10},children:l("div",{children:[l("div",{className:"monitor-item",children:[t("span",{children:"主机名称:"}),t("span",{children:null==m?void 0:m.os.hostName})]}),t(r,{}),l("div",{className:"monitor-item",children:[t("span",{children:"操作系统:"}),t("span",{children:null==m?void 0:m.os.goOs})]}),t(r,{}),l("div",{className:"monitor-item",children:[t("span",{children:"服务器IP:"}),t("span",{children:null==m?void 0:m.os.ip})]}),t(r,{}),l("div",{className:"monitor-item",children:[t("span",{children:"系统架构:"}),t("span",{children:null==m?void 0:m.os.arch})]}),t(r,{}),(null==m?void 0:m.cpu)&&(null==m?void 0:m.cpu.cpuInfo.length)>0&&l(d,{children:[l("div",{className:"monitor-item",children:[t("span",{children:"CPU:"}),t("span",{children:null==m?void 0:m.cpu.cpuInfo[0].modelName})]}),t(r,{})]}),l("div",{className:"monitor-item",children:[t("span",{children:"当前时间:"}),t("span",{children:null==m?void 0:m.os.time})]})]})}),t(o,{title:"磁盘状态",children:t(c,{columns:[{title:"盘符路径",dataIndex:"path",key:"path"},{title:"文件系统",dataIndex:"fs",key:"fs"},{title:"总大小",dataIndex:"total",key:"total"},{title:"可用大小",dataIndex:"available",key:"available"},{title:"已用大小",dataIndex:"used",key:"used"},{title:"已用百分比",dataIndex:"percentage",key:"percentage"}],dataSource:h,pagination:!1})})]})};export{m as default};
