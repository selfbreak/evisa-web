import{g as e,a as t}from"./index-CLE6mKXb.js";import{p as i,K as a,N as n,r,b as s,F as d,j as l,O as o,k as m,m as c,L as p,z as u,S as h,v as f,w as x,x as y,Q as j,y as w}from"./index-CAZO7wzW.js";import{H as S}from"./index-C0Rs89C8.js";import{p as g}from"./proTable-BUOzHjgg.js";import I from"./FormDrawer-QlxEn1Wp.js";import{P as T}from"./Table-Df67gjAw.js";import"./index-D8GpiVD9.js";import"./ProCard-DhO6ZUvh.js";import"./useMultipleSelect-CU5qfINd.js";import"./index-C4vD8WF4.js";import"./iconUtil-tAEv-sd3.js";import"./List-Am-6EvXn.js";import"./index-B9If-b5F.js";import"./useShowArrow-DYY-zTyr.js";import"./useIcons-CZhNbw5e.js";import"./index-CDZ747xP.js";import"./index-aZgwIZlj.js";import"./index-B_rTnUBN.js";import"./index-DhnGB9AA.js";import"./Table-Ccz9AqUB.js";import"./addEventListener-C_b6g-a-.js";import"./index-B9sRrYCz.js";import"./progress-CxuDMVSh.js";import"./index-BxO17Wf0.js";import"./index-CMfzZSsB.js";import"./index-BJcBNser.js";import"./index-DAkRSkRl.js";const v=i.memo((({name:e,className:t})=>{const n=a;if(e)return i.createElement(n[e],{className:t})}));n({scriptUrl:["//at.alicdn.com/t/c/font_3878708_l04g6iwc6y.js"]});const C=()=>{const a=i.useRef(),n=i.useRef(),C=r.useRef(null),[k,b]=r.useState(new Map),[E,_]=r.useState(new Map),R=[{title:"菜单名称",dataIndex:"title",width:300,align:"left",render:(e,t)=>s(h,{children:[l(v,{name:t.icon})," ",t.title]})},{title:"菜单编号",dataIndex:"id",width:80,align:"center"},{title:"菜单类型",dataIndex:"menuType",hideInSearch:!0,valueType:"select",valueEnum:E,width:80,align:"left"},{title:"排序",dataIndex:"sort",hideInSearch:!0,width:50,align:"left"},{title:"路由地址",dataIndex:"path",hideInSearch:!0,width:300,align:"left"},{title:"组件路径",dataIndex:"element",hideInSearch:!0,width:350,align:"left"},{title:"权限标识",dataIndex:"permission",hideInSearch:!0,width:350,align:"left"},{title:"是否隐藏",dataIndex:"isHidden",valueType:"select",valueEnum:k,width:80,align:"left"},{title:"创建时间",dataIndex:"createdAt",hideInSearch:!0,valueType:"dateTime",width:180,align:"left"},{title:"操作",valueType:"option",align:"center",fixed:"right",width:230,render:(e,t)=>void 0!==t.id&&t.id>0&&s(h,{children:[l(S,{permission:["admin:sys-menu:add"],children:l(p,{type:"link",size:"small",icon:l(u,{}),onClick:e=>N(t.id,e),children:"新增"},"addItem")}),l(S,{permission:["admin:sys-menu:edit"],children:l(p,{type:"link",size:"small",icon:l(f,{}),onClick:e=>z(t.id,e),children:"编辑"},"edit")}),l(S,{permission:["admin:sys-menu:del"],children:l(p,{type:"link",size:"small",danger:!0,icon:l(x,{}),onClick:e=>F(t.id,e),children:"删除"},"delete")})]})}];r.useEffect((()=>{(async()=>{const{data:i,msg:a,code:n}=await e("admin_sys_menu_show_hide");if(n!==m.SUCCESS)return void c.error(a);b(t(i));const{data:r,msg:s,code:d}=await e("admin_sys_menu_type");d===m.SUCCESS?_(t(r)):c.error(s)})()}),[]);const N=(e,t)=>{var i;null==(i=C.current)||i.showAddFormDrawer(e),setTimeout((()=>t()),1e3)},z=(e,t)=>{var i;null==(i=C.current)||i.showEditFormDrawer(e),setTimeout((()=>t()),1e3)},F=(e,t)=>{y.confirm({title:"提示",icon:l(w,{}),content:"是否确认删除编号为 "+e+" 的数据项?",okText:"确认",cancelText:"取消",maskClosable:!0,onCancel:()=>{t()},onOk:async()=>{var i;try{const{code:t,msg:n}=await j(e);if(t!==m.SUCCESS)return void c.error(n);null==(i=a.current)||i.reload(!1),c.success(n)}finally{t()}}})};return s(d,{children:[l(T,{className:"ant-pro-table-scroll",columns:R,actionRef:a,formRef:n,bordered:!0,cardBordered:!0,defaultSize:"small",scroll:{x:"2000",y:"100%"},request:async e=>{const{data:t}=await o(e);return{success:!0,data:t,total:t.length}},columnsState:{persistenceKey:"use-pro-table-key",persistenceType:"localStorage"},options:{reload:!0,density:!0,fullScreen:!0},rowKey:"id",search:{labelWidth:"auto",showHiddenNum:!0},pagination:g,dateFormatter:"string",headerTitle:"菜单管理",expandable:{defaultExpandedRowKeys:[0],childrenColumnName:"children",defaultExpandAllRows:!0},toolBarRender:()=>[l(S,{permission:["admin:sys-menu:add"],children:l(p,{type:"primary",icon:l(u,{}),onClick:e=>N(0,e),children:"新增"},"addTable")})]}),l(I,{ref:C,onConfirm:()=>{var e;null==(e=a.current)||e.reload(!1)}})]})};export{C as default};
