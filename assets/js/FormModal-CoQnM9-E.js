import{a as e,b as a,u as r}from"./index-DAS-zYsu.js";import{r as s,e as i,k as o,m as t,j as l,M as d,b as n,I as c,L as m}from"./index-Cb-OfYTB.js";const u=s.forwardRef((({onConfirm:u},h)=>{const[f,C]=s.useState(!1),[p,S]=s.useState({}),[y]=i.useForm();s.useImperativeHandle(h,(()=>({showAddFormModal(){b(),C(!0)},async showEditFormModal(a){const{data:r,msg:s,code:i}=await e(a);i===o.SUCCESS?(S(r),y.setFieldsValue(r),C(!0)):t.error(s)}})));const b=()=>{p.id>0?S({}):S({id:0}),setTimeout((()=>y.resetFields()),100)};return l(d,{title:p.id>0?"编辑":"新增",getContainer:!1,width:500,open:f,maskClosable:!1,keyboard:!1,onCancel:()=>{b(),C(!1)},destroyOnClose:!0,footer:[l(m,{onClick:e=>{b(),C(!1),e()},children:"取消"},"cancel"),l(m,{type:"primary",onClick:e=>(e=>{y.validateFields().then((async s=>{try{if(p.id<=0){const{msg:e,code:r}=await a(s);if(r!==o.SUCCESS)return void t.error(e);t.success(e)}else{const{msg:e,code:a}=await r(p.id,s);if(a!==o.SUCCESS)return void t.error(e);t.success(e)}b(),C(!1),u()}finally{e()}})).catch((a=>{t.error("表单校验失败"),e()}))})(e),children:"确定"},"confirm")],children:n(i,{form:y,layout:"vertical",initialValues:p,children:[l(i.Item,{name:"dictName",label:"字典名称",rules:[{required:!0,message:"请输入字典名称"}],children:l(c,{placeholder:"请输入字典名称"})}),l(i.Item,{name:"dictType",label:"字典类型",rules:[{required:!0,message:"请输入字典类型"}],children:l(c,{placeholder:"请输入字典类型"})}),l(i.Item,{name:"remark",label:"备注",children:l(c.TextArea,{placeholder:"请输入内容"})})]})})}));export{u as default};
