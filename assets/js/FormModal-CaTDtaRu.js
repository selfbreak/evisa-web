import{a as e,b as a,u as s}from"./index-C4pe74qP.js";import{r,e as o,k as i,m as t,j as n,M as d,I as l,L as c}from"./index-Dn3i6gWy.js";const m=r.forwardRef((({onConfirm:m},u)=>{const[f]=o.useForm(),[C,h]=r.useState(!1),[S,y]=r.useState({});r.useImperativeHandle(u,(()=>({showAddFormModal(){p(),h(!0)},async showEditFormModal(a){const{data:s,msg:r,code:o}=await e(a);o===i.SUCCESS?(y(s),f.setFieldsValue(s),h(!0)):t.error(r)}})));const p=()=>{S.id>0?y({}):y({id:0}),setTimeout((()=>f.resetFields()),100)};return n(d,{title:S.id>0?"编辑":"新增",getContainer:!1,width:500,open:C,maskClosable:!1,keyboard:!1,onCancel:()=>{p(),h(!1)},destroyOnClose:!0,footer:[n(c,{onClick:e=>{p(),h(!1),e()},children:"取消"},"cancel"),n(c,{type:"primary",onClick:e=>(e=>{f.validateFields().then((async r=>{try{if(S.id<=0){const{msg:e,code:s}=await a(r);if(s!==i.SUCCESS)return void t.error(e);t.success(e)}else{const{msg:e,code:a}=await s(S.id,r);if(a!==i.SUCCESS)return void t.error(e);t.success(e)}p(),h(!1),m()}finally{e()}})).catch((a=>{t.error("表单校验失败"),e()}))})(e),children:"确定"},"confirm")],children:n(o,{form:f,layout:"vertical",initialValues:S,children:n(o.Item,{name:"name",label:"分类名称",rules:[{required:!0,message:"请输入分类名称"}],children:n(l,{placeholder:"请输入分类名称"})})})})}));export{m as default};
